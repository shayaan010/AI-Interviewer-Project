{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/shazlimekrani/Desktop/project/spur_v7/AI-Interview-Prep-Platform-PrepWise/app/%28root%29/my-account/test-encryption/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport Link from 'next/link';\n\nexport default function TestEncryptionPage() {\n  const [status, setStatus] = useState<'idle' | 'uploading' | 'success' | 'error'>('idle');\n  const [recordingId, setRecordingId] = useState<string | null>(null);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [decryptedText, setDecryptedText] = useState<string | null>(null);\n  \n  // Upload sample data to test encryption\n  const handleUploadTest = async () => {\n    setStatus('uploading');\n    setErrorMessage(null);\n    \n    try {\n      // Create a sample text buffer to simulate voice data\n      const sampleData = new TextEncoder().encode(\n        \"This is a test voice recording to verify the encryption system works correctly.\"\n      );\n      \n      // Convert buffer to base64 for transmission\n      const base64Data = btoa(\n        new Uint8Array(sampleData).reduce((data, byte) => data + String.fromCharCode(byte), '')\n      );\n      \n      // Send to server for encryption and storage\n      const response = await fetch('/api/test-encryption/upload', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          data: base64Data,\n          metadata: {\n            duration: 30,\n            fileSize: sampleData.byteLength,\n            mimeType: 'text/plain'\n          }\n        })\n      });\n      \n      const result = await response.json();\n      \n      if (result.success) {\n        setStatus('success');\n        setRecordingId(result.recordingId);\n      } else {\n        throw new Error(result.message || 'Failed to encrypt and store test data');\n      }\n    } catch (error) {\n      setStatus('error');\n      setErrorMessage(error instanceof Error ? error.message : 'Unknown error occurred');\n      console.error(error);\n    }\n  };\n  \n  // Fetch and decrypt the test data\n  const handleFetchTest = async () => {\n    if (!recordingId) return;\n    \n    setStatus('uploading'); // Reusing status for fetch operation\n    setErrorMessage(null);\n    setDecryptedText(null);\n    \n    try {\n      const response = await fetch(`/api/test-encryption/retrieve?id=${recordingId}`);\n      const result = await response.json();\n      \n      if (result.success) {\n        setStatus('success');\n        // Convert the binary data to text\n        setDecryptedText(result.data);\n      } else {\n        throw new Error(result.message || 'Failed to retrieve and decrypt test data');\n      }\n    } catch (error) {\n      setStatus('error');\n      setErrorMessage(error instanceof Error ? error.message : 'Unknown error occurred');\n      console.error(error);\n    }\n  };\n  \n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"max-w-3xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-bold\">Test Encryption System</h1>\n          <Link href=\"/my-account\" className=\"text-sm text-blue-500 hover:text-blue-600\">\n            Back to Account\n          </Link>\n        </div>\n        \n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8\">\n          <h2 className=\"text-xl font-semibold mb-4\">Encryption Test Tool</h2>\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">\n            This page lets you verify that the voice recording encryption system is working properly.\n            It will create a sample \"recording\" (text data), encrypt it, store it, and then retrieve and decrypt it.\n          </p>\n          \n          {errorMessage && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6\">\n              {errorMessage}\n            </div>\n          )}\n          \n          <div className=\"flex flex-col md:flex-row gap-4 mb-8\">\n            <Button\n              onClick={handleUploadTest}\n              disabled={status === 'uploading'}\n              className=\"flex-1\"\n            >\n              {status === 'uploading' ? 'Processing...' : 'Create & Encrypt Test Data'}\n            </Button>\n            \n            <Button\n              onClick={handleFetchTest}\n              disabled={!recordingId || status === 'uploading'}\n              variant=\"outline\"\n              className=\"flex-1\"\n            >\n              Retrieve & Decrypt Test Data\n            </Button>\n          </div>\n          \n          {recordingId && (\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-md mb-6\">\n              <h3 className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1\">Recording ID:</h3>\n              <code className=\"text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">{recordingId}</code>\n            </div>\n          )}\n          \n          {decryptedText && (\n            <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6\">\n              <h3 className=\"text-lg font-medium mb-3\">Decrypted Content:</h3>\n              <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-md\">\n                <pre className=\"whitespace-pre-wrap text-sm\">{decryptedText}</pre>\n              </div>\n              \n              <div className=\"mt-4 p-3 bg-green-50 border border-green-100 text-green-700 rounded-md\">\n                <p className=\"font-medium\">Success!</p>\n                <p className=\"text-sm\">The encryption and decryption system is working correctly.</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}